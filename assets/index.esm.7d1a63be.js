import{r as e,n,D as t,E as i,l as o,G as r,H as a,I as s,J as u,o as l,L as c,y as d,x as f,M as v,N as h,O as p}from"./index.70ff267a.js";var m="undefined"!=typeof window;function w(e){return m?requestAnimationFrame(e):-1}function g(e){m&&cancelAnimationFrame(e)}var y=(e,n)=>({top:0,left:0,right:e,bottom:n,width:e,height:n});function b(e){const n=[],t=e=>{Array.isArray(e)&&e.forEach((e=>{var i;h(e)&&(n.push(e),(null==(i=e.component)?void 0:i.subTree)&&(n.push(e.component.subTree),t(e.component.subTree.children)),e.children&&t(e.children))}))};return t(e),n}function x(e,n,t){const i=b(e.subTree.children);t.sort(((e,n)=>i.indexOf(e.vnode)-i.indexOf(n.vnode)));const o=t.map((e=>e.proxy));n.sort(((e,n)=>o.indexOf(e)-o.indexOf(n)))}var C,O;function M(e){let n;l((()=>{e(),c((()=>{n=!0}))})),s((()=>{n&&e()}))}function E(e,t,o={}){if(!m)return;const{target:r=window,passive:a=!1,capture:s=!1}=o;let l;const c=i=>{const o=n(i);o&&!l&&(o.addEventListener(e,t,{capture:s,passive:a}),l=!0)},v=i=>{const o=n(i);o&&l&&(o.removeEventListener(e,t,s),l=!1)};i((()=>v(r))),u((()=>v(r))),M((()=>c(r))),d(r)&&f(r,((e,n)=>{v(n),c(e)}))}function T(){if(!C&&(C=e(0),O=e(0),m)){const e=()=>{C.value=window.innerWidth,O.value=window.innerHeight};e(),window.addEventListener("resize",e,{passive:!0}),window.addEventListener("orientationchange",e,{passive:!0})}return{width:C,height:O}}var L,A=/scroll|auto|overlay/i,N=m?window:void 0;function S(e){return"HTML"!==e.tagName&&"BODY"!==e.tagName&&1===e.nodeType}function k(e,n=N){let t=e;for(;t&&t!==n&&S(t);){const{overflowY:e}=window.getComputedStyle(t);if(A.test(e))return t;t=t.parentNode}return n}var _=Symbol("van-field");const D=Object.freeze(Object.defineProperty({__proto__:null,CUSTOM_FIELD_INJECTION_KEY:_,cancelRaf:g,doubleRaf:function(e){w((()=>w(e)))},flattenVNodes:b,getScrollParent:k,inBrowser:m,onMountedOrActivated:M,raf:w,sortChildren:x,supportsPassive:!0,useChildren:function(e){const n=r([]),t=r([]),i=v();return{children:n,linkChildren:o=>{p(e,Object.assign({link:e=>{e.proxy&&(t.push(e),n.push(e.proxy),x(i,n,t))},unlink:e=>{const i=t.indexOf(e);n.splice(i,1),t.splice(i,1)},children:n,internalChildren:t},o))}}},useClickAway:function(e,t,i={}){if(!m)return;const{eventName:o="click"}=i;E(o,(i=>{(Array.isArray(e)?e:[e]).every((e=>{const t=n(e);return t&&!t.contains(i.target)}))&&t(i)}),{target:document})},useCountDown:function(n){let t,i,r,l;const c=e(n.time),d=o((()=>{return{total:e=c.value,days:Math.floor(e/864e5),hours:Math.floor(e%864e5/36e5),minutes:Math.floor(e%36e5/6e4),seconds:Math.floor(e%6e4/1e3),milliseconds:Math.floor(e%1e3)};var e})),f=()=>{r=!1,g(t)},v=()=>Math.max(i-Date.now(),0),h=e=>{var t,i;c.value=e,null==(t=n.onChange)||t.call(n,d.value),0===e&&(f(),null==(i=n.onFinish)||i.call(n))},p=()=>{t=w((()=>{r&&(h(v()),c.value>0&&p())}))},y=()=>{t=w((()=>{if(r){const t=v();e=t,n=c.value,(Math.floor(e/1e3)!==Math.floor(n/1e3)||0===t)&&h(t),c.value>0&&y()}var e,n}))},b=()=>{m&&(n.millisecond?p():y())};return a(f),s((()=>{l&&(r=!0,l=!1,b())})),u((()=>{r&&(f(),l=!0)})),{start:()=>{r||(i=Date.now()+c.value,r=!0,b())},pause:f,reset:(e=n.time)=>{f(),c.value=e},current:d}},useCustomFieldValue:function(e){const n=t(_,null);n&&!n.customValue.value&&(n.customValue.value=e,f(e,(()=>{n.resetValidation(),n.validateWithTrigger("onChange")})))},useEventListener:E,usePageVisibility:function(){if(!L&&(L=e("visible"),m)){const e=()=>{L.value=document.hidden?"hidden":"visible"};e(),window.addEventListener("visibilitychange",e)}return L},useParent:function(n){const r=t(n,null);if(r){const e=v(),{link:n,unlink:t,internalChildren:a}=r;n(e),i((()=>t(e)));return{parent:r,index:o((()=>a.indexOf(e)))}}return{parent:null,index:e(-1)}},useRect:e=>{const t=n(e);if(t===window){const e=t.innerWidth,n=t.innerHeight;return y(e,n)}return(null==t?void 0:t.getBoundingClientRect)?t.getBoundingClientRect():y(0,0)},useScrollParent:function(n,t=N){const i=e();return l((()=>{n.value&&(i.value=k(n.value,t))})),i},useToggle:function(n=!1){const t=e(n);return[t,(e=!t.value)=>{t.value=e}]},useWindowSize:T},Symbol.toStringTag,{value:"Module"}));export{D as i,T as u};
