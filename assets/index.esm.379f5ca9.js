import{r as v,n as w,D as _,E as A,l as R,G as k,H as q,I as D,J as S,o as L,L as G,y as K,x as P,M as I,N as Q,O as X}from"./index.30a081a4.js";var d=typeof window<"u",Z=!0;function m(e){return d?requestAnimationFrame(e):-1}function B(e){d&&cancelAnimationFrame(e)}function $(e){m(()=>m(e))}var ee=e=>e===window,M=(e,n)=>({top:0,left:0,right:e,bottom:n,width:e,height:n}),ne=e=>{const n=w(e);if(ee(n)){const t=n.innerWidth,i=n.innerHeight;return M(t,i)}return n!=null&&n.getBoundingClientRect?n.getBoundingClientRect():M(0,0)};function te(e=!1){const n=v(e);return[n,(i=!n.value)=>{n.value=i}]}function ie(e){const n=_(e,null);if(n){const t=I(),{link:i,unlink:r,internalChildren:o}=n;i(t),A(()=>r(t));const s=R(()=>o.indexOf(t));return{parent:n,index:s}}return{parent:null,index:v(-1)}}function V(e){const n=[],t=i=>{Array.isArray(i)&&i.forEach(r=>{var o;Q(r)&&(n.push(r),(o=r.component)!=null&&o.subTree&&(n.push(r.component.subTree),t(r.component.subTree.children)),r.children&&t(r.children))})};return t(e),n}function Y(e,n,t){const i=V(e.subTree.children);t.sort((o,s)=>i.indexOf(o.vnode)-i.indexOf(s.vnode));const r=t.map(o=>o.proxy);n.sort((o,s)=>{const c=r.indexOf(o),a=r.indexOf(s);return c-a})}function oe(e){const n=k([]),t=k([]),i=I();return{children:n,linkChildren:o=>{X(e,Object.assign({link:a=>{a.proxy&&(t.push(a),n.push(a.proxy),Y(i,n,t))},unlink:a=>{const u=t.indexOf(a);n.splice(u,1),t.splice(u,1)},children:n,internalChildren:t},o))}}}var C=1e3,E=60*C,y=60*E,N=24*y;function re(e){const n=Math.floor(e/N),t=Math.floor(e%N/y),i=Math.floor(e%y/E),r=Math.floor(e%E/C),o=Math.floor(e%C);return{total:e,days:n,hours:t,minutes:i,seconds:r,milliseconds:o}}function ae(e,n){return Math.floor(e/1e3)===Math.floor(n/1e3)}function se(e){let n,t,i,r;const o=v(e.time),s=R(()=>re(o.value)),c=()=>{i=!1,B(n)},a=()=>Math.max(t-Date.now(),0),u=f=>{var x,O;o.value=f,(x=e.onChange)==null||x.call(e,s.value),f===0&&(c(),(O=e.onFinish)==null||O.call(e))},l=()=>{n=m(()=>{i&&(u(a()),o.value>0&&l())})},T=()=>{n=m(()=>{if(i){const f=a();(!ae(f,o.value)||f===0)&&u(f),o.value>0&&T()}})},b=()=>{!d||(e.millisecond?l():T())},z=()=>{i||(t=Date.now()+o.value,i=!0,b())},J=(f=e.time)=>{c(),o.value=f};return q(c),D(()=>{r&&(i=!0,r=!1,b())}),S(()=>{i&&(c(),r=!0)}),{start:z,pause:c,reset:J,current:s}}function F(e){let n;L(()=>{e(),G(()=>{n=!0})}),D(()=>{n&&e()})}function H(e,n,t={}){if(!d)return;const{target:i=window,passive:r=!1,capture:o=!1}=t;let s;const c=u=>{const l=w(u);l&&!s&&(l.addEventListener(e,n,{capture:o,passive:r}),s=!0)},a=u=>{const l=w(u);l&&s&&(l.removeEventListener(e,n,o),s=!1)};A(()=>a(i)),S(()=>a(i)),F(()=>c(i)),K(i)&&P(i,(u,l)=>{a(l),c(u)})}function ue(e,n,t={}){if(!d)return;const{eventName:i="click"}=t;H(i,o=>{(Array.isArray(e)?e:[e]).every(a=>{const u=w(a);return u&&!u.contains(o.target)})&&n(o)},{target:document})}var h,p;function ce(){if(!h&&(h=v(0),p=v(0),d)){const e=()=>{h.value=window.innerWidth,p.value=window.innerHeight};e(),window.addEventListener("resize",e,{passive:!0}),window.addEventListener("orientationchange",e,{passive:!0})}return{width:h,height:p}}var le=/scroll|auto|overlay/i,U=d?window:void 0;function de(e){return e.tagName!=="HTML"&&e.tagName!=="BODY"&&e.nodeType===1}function W(e,n=U){let t=e;for(;t&&t!==n&&de(t);){const{overflowY:i}=window.getComputedStyle(t);if(le.test(i))return t;t=t.parentNode}return n}function fe(e,n=U){const t=v();return L(()=>{e.value&&(t.value=W(e.value,n))}),t}var g;function ve(){if(!g&&(g=v("visible"),d)){const e=()=>{g.value=document.hidden?"hidden":"visible"};e(),window.addEventListener("visibilitychange",e)}return g}var j=Symbol("van-field");function me(e){const n=_(j,null);n&&!n.customValue.value&&(n.customValue.value=e,P(e,()=>{n.resetValidation(),n.validateWithTrigger("onChange")}))}const ge=Object.freeze(Object.defineProperty({__proto__:null,CUSTOM_FIELD_INJECTION_KEY:j,cancelRaf:B,doubleRaf:$,flattenVNodes:V,getScrollParent:W,inBrowser:d,onMountedOrActivated:F,raf:m,sortChildren:Y,supportsPassive:Z,useChildren:oe,useClickAway:ue,useCountDown:se,useCustomFieldValue:me,useEventListener:H,usePageVisibility:ve,useParent:ie,useRect:ne,useScrollParent:fe,useToggle:te,useWindowSize:ce},Symbol.toStringTag,{value:"Module"}));export{ge as i,ce as u};
